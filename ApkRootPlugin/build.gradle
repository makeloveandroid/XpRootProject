plugins {
    id 'org.jetbrains.intellij' version '1.3.0'
    id 'org.jetbrains.kotlin.jvm' version '1.5.10'
    id 'java'
}

group 'org.example'
version '1.6'

repositories {
    mavenCentral()
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation 'commons-cli:commons-cli:1.4'

    implementation "org.jetbrains.kotlin:kotlin-stdlib"
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.2'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.2'
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version = '191.8026.42'
    updateSinceUntilBuild = false
    pluginName = 'apk_root_idea'
    plugins = ['Kotlin','android']
}

tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
}

runIde {
    // Absolute path to installed target 3.5 Android Studio to use as IDE Development Instance
    // The "Contents" directory is macOS specific.
    ideDir = file(StudioCompilePath)
}

patchPluginXml {
    changeNotes = """
      快手工具箱.<br>
      使用方法:<br>
      1. Build -> 快手工具箱 -> 感染应用<br>
      PS:<br>
      如果未连接上设备,可以尝试,Build -> 快手工具箱 -> 重新连接设备<br>
      """
}
test {
    useJUnitPlatform()
}